{% extends "pydata_sphinx_theme/layout.html" %}

{% block docs_body %}
{{ super() }}
<!-- giscus -->
<script id="giscus_script"
        src="https://giscus.app/client.js"
        data-repo="vferat/vferat.github.io"
        data-repo-id="R_kgDOIMr2YA"
        data-category="Q&A"
        data-category-id="DIC_kwDOIMr2YM4CR7_W"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="1"
        data-input-position="top"
        data-theme=document.documentElement.dataset.theme
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

<script>
function reload_giscus() {
  script = document.getElementById('giscus_script')
  document.getElementById('giscus_script').remove();
  var theme = document.documentElement.dataset.theme;
  script.setAttribute('data-theme', theme);
  console.log(script)
  document.body.appendChild(script);
  }

var observer = new MutationObserver(function(mutations) {
      //const theme = document.documentElement.dataset.theme
      //document.getElementById('giscus_script').setAttribute('data-theme', theme);
      console.log(document.getElementById('giscus_script').getAttribute('data-theme'))
      reload_giscus('source_file.js');
    })
observer.observe(document.documentElement, {attributes: true, attributeFilter: ['data-theme']});

</script>
{% endblock %}
